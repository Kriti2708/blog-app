{%extends 'base.html'%}

{% block body %}
<h3 class="my-5" align="center">User Dashboard page</h3>
{% if user.is_authenticated%}
<div class="col=sm-10 m-5 p-5">
  {% comment %} user profile {% endcomment %}
  <div class="card mb-3">
    <img src={{user.image.url}} width="300" height="300"/>
    <div class="card-body" align="center">
      <h5 class="card-title">{{user.username}}</h5>
      <p class="card-text">{{user.profile.bio}}</p>
    </div>
  </div>
  {% endif %}
  {% comment %} blogs posted by the user {% endcomment %}


  {%if posts%}
<table class="table table-hover table-dark">
  <thead>
     <tr class="text-center">
      {% comment %} <th scope="col" style="width:2%">ID</th> {% endcomment %}
      <th scope="col" style="width:2%">Username</th>
      <th scope="col" style="width:2%">Posted on</th>
      <th scope="col" style="width:2%">Category</th>
      <th scope="col" style="width:2%">Title</th>
      <th scope="col" style="width:2%">Content</th>
      <th scope="col" style="width:2%">Actions</th>
    </tr> 
  </thead>
  <tbody>
    {%for post in posts%}
    <tr align="center">
      {% comment %} <th scope="row">{{post.id}}</th> {% endcomment %}
      <td>{{ post.author}}</td>
      <td>{{ post.posted_on }}</td>
      <td>{{ post.category }}</td>
      {% comment %} <td><img src={{post.image.url}} width="300" height="300"/></td> {% endcomment %}
      <td>{{ post.title }}</td>
      <td>{{ post.content }}</td>
      <td>
        <div class="btn-group" role="group" aria-label="Basic example">
          
          <a type="button" href="{% url 'blogapp:update' post.pk%}" class="btn btn-secondary">Edit</a> 
         
          {% comment %} <p> No edit permission </p> {% endcomment %}
          
          <a type="button" href="{% url 'blogapp:delete' post.pk%}" class="btn btn-secondary">Delete</a> 
         
          {% comment %} <p>No delete permission </p> {% endcomment %}
         

        </div>
    </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>
{% else %}
<h4> No records</h4>
{% endif %}

{% endblock %}